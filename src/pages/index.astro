---
import { getCollection } from "astro:content";
import '../styles/global.css';
import PageLayout from '@layouts/PageLayout.astro';
import PostCard from '@components/PostCard.astro';
import SearchBar from '@components/SearchBar.astro';
import Nav from '@components/Nav.astro';

const posts = await getCollection("posts", ({ data }) => !data.draft);
posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<PageLayout title="dev-notes">

  <SearchBar placeholderText="Search posts"/>

  <div class="flex w-full min-h-screen">
    <Nav />

    <div class="w-xl">
      <div class="mb-12">
        <h2 class="text-4xl font-semibold mb-4">Recent Posts</h2>
      </div>
      
      <!-- posts conteiner -->
      <div class="grid grid-cols-2 gap-4" data-posts>
        {posts.map(post => (
          // post
          <PostCard
            title={post.data.title}
            summary={post.data.summary}
            date={post.data.date}
            slug={post.slug}
            tags={post.data.tags}
          />
        ))}
      </div>
      
      <div class="mt-4 text-center text-gray-500" hidden data-no-results>
            Nothing found
      </div>

    </div>
  </div>

</PageLayout>

<script type="module" src="../../src/scripts/search"></script>